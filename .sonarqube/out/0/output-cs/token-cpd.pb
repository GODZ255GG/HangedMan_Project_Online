†
MC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\POCO\Player.cs
	namespace 	
Logic
 
. 
POCO 
{ 
[ 
Table 

(
 
Name 
= 
$str 
) 
] 
public 

class 
Player 
{ 
[ 	
Column	 
( 
IsPrimaryKey 
= 
true #
,# $
IsDbGenerated% 2
=3 4
true5 9
)9 :
]: ;
public		 
int		 
PlayerID		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
[

 	
Column

	 
]

 
public 
string 
Email 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Column	 
] 
public 
string 
Password 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Column	 
] 
public 
string 
NickName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Column	 
] 
public 
string 
FullName 
{  
get! $
;$ %
set& )
;) *
}+ ,
[ 	
Column	 
] 
public 
string 
	BirthDate 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Column	 
] 
public 
string 
PhoneNumber !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Column	 
] 
public 
int 
PointsEarned 
{  !
get" %
;% &
set' *
;* +
}, -
} 
} ¨	
OC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\POCO\Category.cs
	namespace 	
Logic
 
. 
POCO 
{ 
[ 
Table 

(
 
Name 
= 
$str 
) 
] 
public 

class 
Category 
{ 
[ 	
Column	 
( 
IsPrimaryKey 
= 
true #
,# $
IsDbGenerated% 2
=3 4
true5 9
)9 :
]: ;
public		 
int		 

CategoryID		 
{		 
get		  #
;		# $
set		% (
;		( )
}		* +
[

 	
Column

	 
]

 
public 
string 
SpanishCategory %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Column	 
] 
public 
string 
EnglishCategory %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
} 
} Ñ
YC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str  
)  !
]! "
[ 
assembly 	
:	 

AssemblyDescription 
( 
$str !
)! "
]" #
[		 
assembly		 	
:			 
!
AssemblyConfiguration		  
(		  !
$str		! #
)		# $
]		$ %
[

 
assembly

 	
:

	 

AssemblyCompany

 
(

 
$str

 
)

 
]

 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str "
)" #
]# $
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[ 
assembly 	
:	 

Guid 
( 
$str 6
)6 7
]7 8
[ 
assembly 	
:	 

AssemblyVersion 
( 
$str $
)$ %
]% &
[   
assembly   	
:  	 

AssemblyFileVersion   
(   
$str   (
)  ( )
]  ) *ï
LC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\POCO\Match.cs
	namespace 	
Logic
 
. 
POCO 
{ 
[ 
Table 

(
 
Name 
= 
$str 
) 
] 
public 

class 
Match 
{ 
[ 	
Column	 
( 
IsPrimaryKey 
= 
true #
,# $
IsDbGenerated% 2
=3 4
true5 9
)9 :
]: ;
public		 
int		 
MatchID		 
{		 
get		  
;		  !
set		" %
;		% &
}		' (
[

 	
Column

	 
]

 
public 
int 
WordID 
{ 
get 
;  
set! $
;$ %
}& '
[ 	
Column	 
] 
public 
string 
	DateMatch 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Column	 
] 
public 
int 
? 
WinnerID 
{ 
get "
;" #
set$ '
;' (
}) *
[ 	
Column	 
] 
public 
int 
ChallengerID 
{  !
get" %
;% &
set' *
;* +
}, -
[ 	
Column	 
] 
public 
int 
? 
GuestID 
{ 
get !
;! "
set# &
;& '
}( )
[ 	
Column	 
] 
public 
int 
StatusMatchID  
{! "
get# &
;& '
set( +
;+ ,
}- .
[ 	
Column	 
] 
public 
char 
? 
SelectedLetter #
{$ %
get& )
;) *
set+ .
;. /
}0 1
[ 	
Column	 
] 
public 
int 
RemainingAttempts $
{% &
get' *
;* +
set, /
;/ 0
}1 2
[ 	
Column	 
] 
public 
string 
NickNameChallenger (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
[ 	
Column	 
] 
public 
string 
EmailChallenger %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
[ 	
Column	 
] 
public 
int 
MatchLanguage  
{! "
get# &
;& '
set( +
;+ ,
}- .
}!! 
}"" á
KC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\POCO\Word.cs
	namespace 	
Logic
 
. 
POCO 
{ 
[ 
Table 

(
 
Name 
= 
$str 
) 
] 
public 

class 
Word 
{ 
[ 	
Column	 
( 
IsPrimaryKey 
= 
true #
,# $
IsDbGenerated% 2
=3 4
true5 9
)9 :
]: ;
public		 
int		 
WordID		 
{		 
get		 
;		  
set		! $
;		$ %
}		& '
[

 	
Column

	 
]

 
public 
string 
EnglishWord !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Column	 
] 
public 
string 
SpanishWord !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Column	 
] 
public 
string 
EnglishClue !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Column	 
] 
public 
string 
SpanishClue !
{" #
get$ '
;' (
set) ,
;, -
}. /
[ 	
Column	 
] 
public 
int 

CategoryID 
{ 
get  #
;# $
set% (
;( )
}* +
} 
} ƒL
MC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\DTO\WordDTO.cs
	namespace 	
Logic
 
. 
DTO 
{ 
public		 

class		 
WordDTO		 
{

 
public 
static 
List 
< 
Word 
>  
GetWordsPerCategory! 4
(4 5
int5 8
category9 A
)A B
{ 	
try 
{ 
var 

connection 
=  
ConnectionDB! -
.- .
getConnection. ;
(; <
)< =
;= >

connection 
. 
Open 
(  
)  !
;! "
DataContext 
dataContext '
=( )
new* -
DataContext. 9
(9 :

connection: D
)D E
;E F
var 
words 
= 
( 
from !
wor" %
in& (
dataContext) 4
.4 5
GetTable5 =
<= >
Word> B
>B C
(C D
)D E
where "
wor# &
.& '

CategoryID' 1
==2 4
category5 =
select #
wor$ '
)' (
.( )
ToList) /
(/ 0
)0 1
;1 2
return 
words 
; 
} 
catch 
( 
SqlException 
ex  "
)" #
{ 
throw 
ex 
; 
} 
} 	
public 
static 
string 
GetWordSpanish +
(+ ,
int, /
wordID0 6
)6 7
{ 	
try   
{!! 
var"" 

connection"" 
=""  
ConnectionDB""! -
.""- .
getConnection"". ;
(""; <
)""< =
;""= >

connection## 
.## 
Open## 
(##  
)##  !
;##! "
DataContext$$ 
dataContext$$ '
=$$( )
new$$* -
DataContext$$. 9
($$9 :

connection$$: D
)$$D E
;$$E F
var%% 
word%% 
=%% 
(%% 
from%%  
wor%%! $
in%%% '
dataContext%%( 3
.%%3 4
GetTable%%4 <
<%%< =
Word%%= A
>%%A B
(%%B C
)%%C D
where&& !
wor&&" %
.&&% &
WordID&&& ,
==&&- /
wordID&&0 6
select'' "
wor''# &
.''& '
SpanishWord''' 2
)''2 3
.''3 4
FirstOrDefault''4 B
(''B C
)''C D
;''D E
return(( 
word(( 
;(( 
}** 
catch++ 
(++ 
SqlException++ 
ex++  "
)++" #
{,, 
throw-- 
ex-- 
;-- 
}.. 
}// 	
public11 
static11 
string11 
GetWordEnglish11 +
(11+ ,
int11, /
wordID110 6
)116 7
{22 	
try33 
{44 
var55 

connection55 
=55  
ConnectionDB55! -
.55- .
getConnection55. ;
(55; <
)55< =
;55= >

connection66 
.66 
Open66 
(66  
)66  !
;66! "
DataContext77 
dataContext77 '
=77( )
new77* -
DataContext77. 9
(779 :

connection77: D
)77D E
;77E F
var88 
word88 
=88 
(88 
from88  
wor88! $
in88% '
dataContext88( 3
.883 4
GetTable884 <
<88< =
Word88= A
>88A B
(88B C
)88C D
where99 !
wor99" %
.99% &
WordID99& ,
==99- /
wordID990 6
select:: "
wor::# &
.::& '
EnglishWord::' 2
)::2 3
.::3 4
FirstOrDefault::4 B
(::B C
)::C D
;::D E
return;; 
word;; 
;;; 
}== 
catch>> 
(>> 
SqlException>> 
ex>>  "
)>>" #
{?? 
throw@@ 
ex@@ 
;@@ 
}AA 
}BB 	
publicDD 
staticDD 
stringDD 
GetClueSpanishDD +
(DD+ ,
intDD, /
wordIDDD0 6
)DD6 7
{EE 	
tryFF 
{GG 
varHH 

connectionHH 
=HH  
ConnectionDBHH! -
.HH- .
getConnectionHH. ;
(HH; <
)HH< =
;HH= >

connectionII 
.II 
OpenII 
(II  
)II  !
;II! "
DataContextJJ 
dataContextJJ '
=JJ( )
newJJ* -
DataContextJJ. 9
(JJ9 :

connectionJJ: D
)JJD E
;JJE F
varKK 
clueKK 
=KK 
(KK 
fromKK  
cluKK! $
inKK% '
dataContextKK( 3
.KK3 4
GetTableKK4 <
<KK< =
WordKK= A
>KKA B
(KKB C
)KKC D
whereLL !
cluLL" %
.LL% &
WordIDLL& ,
==LL- /
wordIDLL0 6
selectMM "
cluMM# &
.MM& '
SpanishClueMM' 2
)MM2 3
.MM3 4
FirstOrDefaultMM4 B
(MMB C
)MMC D
;MMD E
returnNN 
clueNN 
;NN 
}OO 
catchPP 
(PP 
SqlExceptionPP 
exPP  "
)PP" #
{QQ 
throwRR 
exRR 
;RR 
}SS 
}TT 	
publicVV 
staticVV 
stringVV 
GetClueEnglishVV +
(VV+ ,
intVV, /
wordIDVV0 6
)VV6 7
{WW 	
tryXX 
{YY 
varZZ 

connectionZZ 
=ZZ  
ConnectionDBZZ! -
.ZZ- .
getConnectionZZ. ;
(ZZ; <
)ZZ< =
;ZZ= >

connection[[ 
.[[ 
Open[[ 
([[  
)[[  !
;[[! "
DataContext\\ 
dataContext\\ '
=\\( )
new\\* -
DataContext\\. 9
(\\9 :

connection\\: D
)\\D E
;\\E F
var]] 
clue]] 
=]] 
(]] 
from]]  
clu]]! $
in]]% '
dataContext]]( 3
.]]3 4
GetTable]]4 <
<]]< =
Word]]= A
>]]A B
(]]B C
)]]C D
where^^ !
clu^^" %
.^^% &
WordID^^& ,
==^^- /
wordID^^0 6
select__ "
clu__# &
.__& '
EnglishClue__' 2
)__2 3
.__3 4
FirstOrDefault__4 B
(__B C
)__C D
;__D E
return`` 
clue`` 
;`` 
}aa 
catchbb 
(bb 
SqlExceptionbb 
exbb  "
)bb" #
{cc 
throwdd 
exdd 
;dd 
}ee 
}ff 	
publichh 
statichh 
stringhh 
GetCategoryByWordIDhh 0
(hh0 1
inthh1 4
wordIDhh5 ;
,hh; <
inthh= @
matchLanguagehhA N
)hhN O
{ii 	
tryjj 
{kk 
usingll 
(ll 
varll 

connectionll %
=ll& '
ConnectionDBll( 4
.ll4 5
getConnectionll5 B
(llB C
)llC D
)llD E
{mm 

connectionnn 
.nn 
Opennn #
(nn# $
)nn$ %
;nn% &
DataContextoo 
dataContextoo  +
=oo, -
newoo. 1
DataContextoo2 =
(oo= >

connectionoo> H
)ooH I
;ooI J
varpp 
querypp 
=pp 
frompp  $
wpp% &
inpp' )
dataContextpp* 5
.pp5 6
GetTablepp6 >
<pp> ?
Wordpp? C
>ppC D
(ppD E
)ppE F
joinqq  $
cqq% &
inqq' )
dataContextqq* 5
.qq5 6
GetTableqq6 >
<qq> ?
Categoryqq? G
>qqG H
(qqH I
)qqI J
onqqK M
wqqN O
.qqO P

CategoryIDqqP Z
equalsqq[ a
cqqb c
.qqc d

CategoryIDqqd n
whererr  %
wrr& '
.rr' (
WordIDrr( .
==rr/ 1
wordIDrr2 8
selectss  &
css' (
;ss( )
vartt 
categorytt  
=tt! "
querytt# (
.tt( )
FirstOrDefaulttt) 7
(tt7 8
)tt8 9
;tt9 :
ifuu 
(uu 
categoryuu  
==uu! #
nulluu$ (
)uu( )
returnvv 
nullvv #
;vv# $
returnww 
matchLanguageww (
==ww) +
$numww, -
?ww. /
categoryww0 8
.ww8 9
SpanishCategoryww9 H
:wwI J
categorywwK S
.wwS T
EnglishCategorywwT c
;wwc d
}xx 
}yy 
catchzz 
(zz 
SqlExceptionzz 
exzz  "
)zz" #
{{{ 
throw|| 
ex|| 
;|| 
}}} 
}~~ 	
} 
}ÄÄ ÈZ
OC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\DTO\PlayerDTO.cs
	namespace 	
Logic
 
. 
DTO 
{ 
public		 

class		 
	PlayerDTO		 
{

 
public 
static 
bool 
RegisterPlayer )
() *
Player* 0
	newPlayer1 :
): ;
{ 	
try 
{ 
var 

connection 
=  
ConnectionDB! -
.- .
getConnection. ;
(; <
)< =
;= >

connection 
. 
Open 
(  
)  !
;! "
DataContext 

dataContex &
=' (
new) ,
DataContext- 8
(8 9

connection9 C
)C D
;D E

dataContex 
. 
GetTable #
<# $
Player$ *
>* +
(+ ,
), -
.- .
InsertOnSubmit. <
(< =
	newPlayer= F
)F G
;G H

dataContex 
. 
SubmitChanges (
(( )
)) *
;* +
return 
true 
; 
} 
catch 
( 
SqlException 
ex  "
)" #
{ 
throw 
ex 
; 
} 
} 	
public 
static 
bool "
EmailAlreadyRegistered 1
(1 2
string2 8
email9 >
)> ?
{ 	
try 
{ 
var   

connection   
=    
ConnectionDB  ! -
.  - .
getConnection  . ;
(  ; <
)  < =
;  = >

connection!! 
.!! 
Open!! 
(!!  
)!!  !
;!!! "
DataContext"" 
dataContext"" '
=""( )
new""* -
DataContext"". 9
(""9 :

connection"": D
)""D E
;""E F
bool## 
emailRegistered## $
=##% &
dataContext##' 2
.##2 3
GetTable##3 ;
<##; <
Player##< B
>##B C
(##C D
)##D E
.##E F
Any##F I
(##I J
pl##J L
=>##M O
pl##P R
.##R S
Email##S X
==##Y [
email##\ a
)##a b
;##b c
return$$ 
emailRegistered$$ &
;$$& '
}%% 
catch&& 
(&& 
SqlException&& 
ex&&  "
)&&" #
{'' 
throw(( 
ex(( 
;(( 
})) 
}** 	
public,, 
static,, 
bool,, &
TelephoneAlreadyRegistered,, 5
(,,5 6
string,,6 <
	telephone,,= F
),,F G
{-- 	
try.. 
{// 
var00 

connection00 
=00  
ConnectionDB00! -
.00- .
getConnection00. ;
(00; <
)00< =
;00= >

connection11 
.11 
Open11 
(11  
)11  !
;11! "
DataContext22 
dataContext22 '
=22( )
new22* -
DataContext22. 9
(229 :

connection22: D
)22D E
;22E F
bool33 
telephoneRegistered33 (
=33) *
dataContext33+ 6
.336 7
GetTable337 ?
<33? @
Player33@ F
>33F G
(33G H
)33H I
.33I J
Any33J M
(33M N
pl33N P
=>33Q S
pl33T V
.33V W
PhoneNumber33W b
==33c e
	telephone33f o
)33o p
;33p q
return44 
telephoneRegistered44 *
;44* +
}55 
catch66 
(66 
SqlException66 
ex66  "
)66" #
{77 
throw88 
ex88 
;88 
}99 
}:: 	
public<< 
static<< 
bool<< %
NicknameAlreadyRegistered<< 4
(<<4 5
string<<5 ;
nickname<<< D
)<<D E
{== 	
try>> 
{?? 
var@@ 

connection@@ 
=@@  
ConnectionDB@@! -
.@@- .
getConnection@@. ;
(@@; <
)@@< =
;@@= >

connectionAA 
.AA 
OpenAA 
(AA  
)AA  !
;AA! "
DataContextBB 
dataContextBB '
=BB( )
newBB* -
DataContextBB. 9
(BB9 :

connectionBB: D
)BBD E
;BBE F
boolCC 
nicknameRegisteredCC '
=CC( )
dataContextCC* 5
.CC5 6
GetTableCC6 >
<CC> ?
PlayerCC? E
>CCE F
(CCF G
)CCG H
.CCH I
AnyCCI L
(CCL M
plCCM O
=>CCP R
plCCS U
.CCU V
NickNameCCV ^
==CC_ a
nicknameCCb j
)CCj k
;CCk l
returnDD 
nicknameRegisteredDD )
;DD) *
}EE 
catchFF 
(FF 
SqlExceptionFF 
exFF  "
)FF" #
{GG 
throwHH 
exHH 
;HH 
}II 
}JJ 	
publicLL 
staticLL 
PlayerLL 
LogInLL "
(LL" #
stringLL# )
emailLL* /
,LL/ 0
stringLL1 7
passwordLL8 @
)LL@ A
{MM 	
tryNN 
{OO 
varPP 

connectionPP 
=PP  
ConnectionDBPP! -
.PP- .
getConnectionPP. ;
(PP; <
)PP< =
;PP= >

connectionQQ 
.QQ 
OpenQQ 
(QQ  
)QQ  !
;QQ! "
DataContextRR 
dataContextRR '
=RR( )
newRR* -
DataContextRR. 9
(RR9 :

connectionRR: D
)RRD E
;RRE F
varSS 
userSS 
=SS 
(SS 
fromSS  
usSS! #
inSS$ &
dataContextSS' 2
.SS2 3
GetTableSS3 ;
<SS; <
PlayerSS< B
>SSB C
(SSC D
)SSD E
whereTT !
usTT" $
.TT$ %
EmailTT% *
==TT+ -
emailTT. 3
&&TT4 6
usTT7 9
.TT9 :
PasswordTT: B
==TTC E
passwordTTF N
selectUU "
usUU# %
)UU% &
.UU& '
FirstOrDefaultUU' 5
(UU5 6
)UU6 7
;UU7 8
returnVV 
userVV 
;VV 
}WW 
catchXX 
(XX 
SqlExceptionXX 
exXX  "
)XX" #
{YY 
throwZZ 
exZZ 
;ZZ 
}[[ 
}\\ 	
public^^ 
static^^ 
bool^^ 
UpdatePlayerProfile^^ .
(^^. /
Player^^/ 5
updatedPlayer^^6 C
)^^C D
{__ 	
try`` 
{aa 
varbb 

connectionbb 
=bb  
ConnectionDBbb! -
.bb- .
getConnectionbb. ;
(bb; <
)bb< =
;bb= >

connectioncc 
.cc 
Opencc 
(cc  
)cc  !
;cc! "
DataContextdd 
dataContextdd '
=dd( )
newdd* -
DataContextdd. 9
(dd9 :

connectiondd: D
)ddD E
;ddE F
varee 
playerToUpdateee "
=ee# $
dataContextee% 0
.ee0 1
GetTableee1 9
<ee9 :
Playeree: @
>ee@ A
(eeA B
)eeB C
.eeC D
FirstOrDefaulteeD R
(eeR S
pleeS U
=>eeV X
pleeY [
.ee[ \
PlayerIDee\ d
==eee g
updatedPlayereeh u
.eeu v
PlayerIDeev ~
)ee~ 
;	ee Ä
ifgg 
(gg 
playerToUpdategg "
!=gg# %
nullgg& *
)gg* +
{hh 
playerToUpdateii "
.ii" #
FullNameii# +
=ii, -
updatedPlayerii. ;
.ii; <
FullNameii< D
;iiD E
playerToUpdatejj "
.jj" #
NickNamejj# +
=jj, -
updatedPlayerjj. ;
.jj; <
NickNamejj< D
;jjD E
playerToUpdatekk "
.kk" #
Emailkk# (
=kk) *
updatedPlayerkk+ 8
.kk8 9
Emailkk9 >
;kk> ?
playerToUpdatell "
.ll" #
PhoneNumberll# .
=ll/ 0
updatedPlayerll1 >
.ll> ?
PhoneNumberll? J
;llJ K
playerToUpdatemm "
.mm" #
Passwordmm# +
=mm, -
updatedPlayermm. ;
.mm; <
Passwordmm< D
;mmD E
playerToUpdatenn "
.nn" #
	BirthDatenn# ,
=nn- .
updatedPlayernn/ <
.nn< =
	BirthDatenn= F
;nnF G
dataContextpp 
.pp  
SubmitChangespp  -
(pp- .
)pp. /
;pp/ 0
returnqq 
trueqq 
;qq  
}rr 
elsess 
{tt 
returnuu 
falseuu  
;uu  !
}vv 
}ww 
catchxx 
(xx 
	Exceptionxx 
exxx 
)xx  
{yy 
Consolezz 
.zz 
	WriteLinezz !
(zz! "
$"zz" $
$strzz$ O
{zzO P
exzzP R
.zzR S
MessagezzS Z
}zzZ [
"zz[ \
)zz\ ]
;zz] ^
return{{ 
false{{ 
;{{ 
}|| 
}}} 	
public 
static 
int 
	GetPoints #
(# $
int$ '
playerID( 0
)0 1
{
ÄÄ 	
try
ÅÅ 
{
ÇÇ 
var
ÉÉ 

connection
ÉÉ 
=
ÉÉ  
ConnectionDB
ÉÉ! -
.
ÉÉ- .
getConnection
ÉÉ. ;
(
ÉÉ; <
)
ÉÉ< =
;
ÉÉ= >

connection
ÑÑ 
.
ÑÑ 
Open
ÑÑ 
(
ÑÑ  
)
ÑÑ  !
;
ÑÑ! "
DataContext
ÖÖ 
dataContext
ÖÖ '
=
ÖÖ( )
new
ÖÖ* -
DataContext
ÖÖ. 9
(
ÖÖ9 :

connection
ÖÖ: D
)
ÖÖD E
;
ÖÖE F
var
ÜÜ 
pointEarned
ÜÜ 
=
ÜÜ  !
(
ÜÜ" #
from
ÜÜ# '
p
ÜÜ( )
in
ÜÜ* ,
dataContext
ÜÜ- 8
.
ÜÜ8 9
GetTable
ÜÜ9 A
<
ÜÜA B
Player
ÜÜB H
>
ÜÜH I
(
ÜÜI J
)
ÜÜJ K
where
áá# (
p
áá) *
.
áá* +
PlayerID
áá+ 3
==
áá4 6
playerID
áá7 ?
select
àà# )
p
àà* +
.
àà+ ,
PointsEarned
àà, 8
)
àà8 9
.
àà9 :
FirstOrDefault
àà: H
(
ààH I
)
ààI J
;
ààJ K
return
ââ 
pointEarned
ââ "
;
ââ" #
}
ää 
catch
ãã 
(
ãã 
SqlException
ãã 
ex
ãã  "
)
ãã" #
{
åå 
throw
çç 
ex
çç 
;
çç 
}
éé 
}
èè 	
}
ëë 
}íí ÆÉ
NC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\DTO\MatchDTO.cs
	namespace 	
Logic
 
. 
DTO 
{ 
public		 

class		 
MatchDTO		 
{

 
public 
static 
Match 
CreateMatch '
(' (
Match( -
newMatch. 6
)6 7
{ 	
try 
{ 
var 

connection 
=  
ConnectionDB! -
.- .
getConnection. ;
(; <
)< =
;= >

connection 
. 
Open 
(  
)  !
;! "
DataContext 
dataContext '
=( )
new* -
DataContext. 9
(9 :

connection: D
)D E
;E F
dataContext 
. 
GetTable $
<$ %
Match% *
>* +
(+ ,
), -
.- .
InsertOnSubmit. <
(< =
newMatch= E
)E F
;F G
dataContext 
. 
SubmitChanges )
() *
)* +
;+ ,
return 
newMatch 
;  
} 
catch 
( 
SqlException 
ex  "
)" #
{ 
throw 
ex 
; 
} 
} 	
public 
static 
List 
< 
Match  
>  ! 
GetMatchesAvaliables" 6
(6 7
int7 :
playerID; C
)C D
{ 	
try 
{ 
using   
(   
var   

connection   %
=  & '
ConnectionDB  ( 4
.  4 5
getConnection  5 B
(  B C
)  C D
)  D E
{!! 

connection"" 
."" 
Open"" #
(""# $
)""$ %
;""% &
DataContext## 
dataContext##  +
=##, -
new##. 1
DataContext##2 =
(##= >

connection##> H
)##H I
;##I J
var$$ 
matches$$ 
=$$  !
($$" #
from$$# '
mat$$( +
in$$, .
dataContext$$/ :
.$$: ;
GetTable$$; C
<$$C D
Match$$D I
>$$I J
($$J K
)$$K L
where%%# (
mat%%) ,
.%%, -
StatusMatchID%%- :
==%%; =
$num%%> ?
&&%%@ B
mat%%C F
.%%F G
ChallengerID%%G S
!=%%T V
playerID%%W _
select&&# )
mat&&* -
)&&- .
.&&. /
ToList&&/ 5
(&&5 6
)&&6 7
;&&7 8
return'' 
matches'' "
;''" #
}(( 
})) 
catch** 
(** 
SqlException** 
ex**  "
)**" #
{++ 
throw,, 
ex,, 
;,, 
}-- 
}.. 	
public00 
static00 
List00 
<00 
Match00  
>00  !
GetMatchesPlayed00" 2
(002 3
int003 6
playerID007 ?
)00? @
{11 	
try22 
{33 
using44 
(44 
var44 

connection44 %
=44& '
ConnectionDB44( 4
.444 5
getConnection445 B
(44B C
)44C D
)44D E
{55 

connection66 
.66 
Open66 #
(66# $
)66$ %
;66% &
DataContext77 
dataContext77  +
=77, -
new77. 1
DataContext772 =
(77= >

connection77> H
)77H I
;77I J
var99 
matches99 
=99  !
(99" #
from99# '
mat99( +
in99, .
dataContext99/ :
.99: ;
GetTable99; C
<99C D
Match99D I
>99I J
(99J K
)99K L
where::# (
(::) *
mat::* -
.::- .
StatusMatchID::. ;
==::< >
$num::? @
||::A C
mat::D G
.::G H
StatusMatchID::H U
==::V X
$num::Y Z
)::Z [
&&::\ ^
(;;) *
mat;;* -
.;;- .
ChallengerID;;. :
==;;; =
playerID;;> F
||;;G I
mat;;J M
.;;M N
GuestID;;N U
==;;V X
playerID;;Y a
);;a b
orderby<<# *
mat<<+ .
.<<. /
	DateMatch<</ 8

descending<<9 C
select==# )
mat==* -
)==- .
.==. /
ToList==/ 5
(==5 6
)==6 7
;==7 8
return?? 
matches?? "
;??" #
}@@ 
}AA 
catchBB 
(BB 
SqlExceptionBB 
exBB  "
)BB" #
{CC 
throwDD 
exDD 
;DD 
}EE 
}FF 	
publicHH 
staticHH 
boolHH 
	InitMatchHH $
(HH$ %
intHH% (
guestIDHH) 0
,HH0 1
intHH2 5
matchIDHH6 =
)HH= >
{II 	
tryJJ 
{KK 
varLL 

connectionLL 
=LL  
ConnectionDBLL! -
.LL- .
getConnectionLL. ;
(LL; <
)LL< =
;LL= >

connectionMM 
.MM 
OpenMM 
(MM  
)MM  !
;MM! "
DataContextNN 
dataContextNN '
=NN( )
newNN* -
DataContextNN. 9
(NN9 :

connectionNN: D
)NND E
;NNE F
varOO 
matchToUpdateOO !
=OO" #
dataContextOO$ /
.OO/ 0
GetTableOO0 8
<OO8 9
MatchOO9 >
>OO> ?
(OO? @
)OO@ A
.OOA B
FirstOrDefaultOOB P
(OOP Q
matOOQ T
=>OOU W
matOOX [
.OO[ \
MatchIDOO\ c
==OOd f
matchIDOOg n
)OOn o
;OOo p
ifPP 
(PP 
matchToUpdatePP !
!=PP" $
nullPP% )
)PP) *
{QQ 
matchToUpdateRR !
.RR! "
GuestIDRR" )
=RR* +
guestIDRR, 3
;RR3 4
matchToUpdateSS !
.SS! "
StatusMatchIDSS" /
=SS0 1
$numSS2 3
;SS3 4
dataContextTT 
.TT  
SubmitChangesTT  -
(TT- .
)TT. /
;TT/ 0
returnUU 
trueUU 
;UU  
}WW 
elseXX 
{YY 
returnZZ 
falseZZ  
;ZZ  !
}[[ 
}\\ 
catch]] 
(]] 
SqlException]] 
ex]]  "
)]]" #
{^^ 
throw__ 
ex__ 
;__ 
}`` 
}aa 	
publiccc 
staticcc 
stringcc 
GetGuestNickNamecc -
(cc- .
intcc. 1
playerIDcc2 :
)cc: ;
{dd 	
tryee 
{ff 
usinggg 
(gg 
vargg 

connectiongg %
=gg& '
ConnectionDBgg( 4
.gg4 5
getConnectiongg5 B
(ggB C
)ggC D
)ggD E
{hh 

connectionii 
.ii 
Openii #
(ii# $
)ii$ %
;ii% &
DataContextjj 
dataContextjj  +
=jj, -
newjj. 1
DataContextjj2 =
(jj= >

connectionjj> H
)jjH I
;jjI J
varkk 
nickNamekk  
=kk! "
(kk# $
fromkk$ (
nickk) ,
inkk- /
dataContextkk0 ;
.kk; <
GetTablekk< D
<kkD E
PlayerkkE K
>kkK L
(kkL M
)kkM N
wherell$ )
nicll* -
.ll- .
PlayerIDll. 6
==ll7 9
playerIDll: B
selectmm$ *
nicmm+ .
.mm. /
NickNamemm/ 7
)mm7 8
.mm8 9
FirstOrDefaultmm9 G
(mmG H
)mmH I
;mmI J
returnnn 
nickNamenn #
;nn# $
}oo 
}pp 
catchqq 
(qq 
SqlExceptionqq 
exqq  "
)qq" #
{rr 
throwss 
exss 
;ss 
}tt 
}uu 	
publicww 
staticww 
boolww 

LeaveMatchww %
(ww% &
intww& )
matchIDww* 1
)ww1 2
{xx 	
tryyy 
{zz 
var{{ 

connection{{ 
={{  
ConnectionDB{{! -
.{{- .
getConnection{{. ;
({{; <
){{< =
;{{= >

connection|| 
.|| 
Open|| 
(||  
)||  !
;||! "
DataContext}} 
dataContext}} '
=}}( )
new}}* -
DataContext}}. 9
(}}9 :

connection}}: D
)}}D E
;}}E F
var~~ 
matchToLeave~~  
=~~! "
dataContext~~# .
.~~. /
GetTable~~/ 7
<~~7 8
Match~~8 =
>~~= >
(~~> ?
)~~? @
.~~@ A
FirstOrDefault~~A O
(~~O P
mat~~P S
=>~~T V
mat~~W Z
.~~Z [
MatchID~~[ b
==~~c e
matchID~~f m
)~~m n
;~~n o
if 
( 
matchToLeave  
!=! #
null$ (
)( )
{
ÄÄ 
matchToLeave
ÅÅ  
.
ÅÅ  !
StatusMatchID
ÅÅ! .
=
ÅÅ/ 0
$num
ÅÅ1 2
;
ÅÅ2 3
dataContext
ÇÇ 
.
ÇÇ  
SubmitChanges
ÇÇ  -
(
ÇÇ- .
)
ÇÇ. /
;
ÇÇ/ 0
return
ÉÉ 
true
ÉÉ 
;
ÉÉ  
}
ÑÑ 
else
ÖÖ 
{
ÜÜ 
return
áá 
false
áá  
;
áá  !
}
àà 
}
ââ 
catch
ää 
(
ää 
SqlException
ää 
ex
ää  "
)
ää" #
{
ãã 
throw
åå 
ex
åå 
;
åå 
}
çç 
}
éé 	
public
êê 
static
êê 
bool
êê 
IsThereGuest
êê '
(
êê' (
int
êê( +
matchID
êê, 3
)
êê3 4
{
ëë 	
try
íí 
{
ìì 
using
îî 
(
îî 
var
îî 

connection
îî %
=
îî& '
ConnectionDB
îî( 4
.
îî4 5
getConnection
îî5 B
(
îîB C
)
îîC D
)
îîD E
{
ïï 

connection
ññ 
.
ññ 
Open
ññ #
(
ññ# $
)
ññ$ %
;
ññ% &
DataContext
óó 
dataContext
óó  +
=
óó, -
new
óó. 1
DataContext
óó2 =
(
óó= >

connection
óó> H
)
óóH I
;
óóI J
var
òò 
guest
òò 
=
òò 
(
òò  !
from
òò! %
gue
òò& )
in
òò* ,
dataContext
òò- 8
.
òò8 9
GetTable
òò9 A
<
òòA B
Match
òòB G
>
òòG H
(
òòH I
)
òòI J
where
ôô! &
gue
ôô' *
.
ôô* +
MatchID
ôô+ 2
==
ôô3 5
matchID
ôô6 =
&&
ôô> @
gue
ôôA D
.
ôôD E
GuestID
ôôE L
!=
ôôM O
null
ôôP T
select
öö! '
gue
öö( +
.
öö+ ,
GuestID
öö, 3
)
öö3 4
.
öö4 5
FirstOrDefault
öö5 C
(
ööC D
)
ööD E
;
ööE F
return
õõ 
guest
õõ  
!=
õõ! #
null
õõ$ (
;
õõ( )
}
úú 
}
ùù 
catch
ûû 
(
ûû 
SqlException
ûû 
ex
ûû  "
)
ûû" #
{
üü 
throw
†† 
ex
†† 
;
†† 
}
°° 
}
¢¢ 	
public
§§ 
static
§§ 
bool
§§ 
FinishMatch
§§ &
(
§§& '
int
§§' *
matchID
§§+ 2
)
§§2 3
{
•• 	
try
¶¶ 
{
ßß 
var
®® 

connection
®® 
=
®®  
ConnectionDB
®®! -
.
®®- .
getConnection
®®. ;
(
®®; <
)
®®< =
;
®®= >

connection
©© 
.
©© 
Open
©© 
(
©©  
)
©©  !
;
©©! "
DataContext
™™ 
dataContext
™™ '
=
™™( )
new
™™* -
DataContext
™™. 9
(
™™9 :

connection
™™: D
)
™™D E
;
™™E F
var
´´ 
matchToLeave
´´  
=
´´! "
dataContext
´´# .
.
´´. /
GetTable
´´/ 7
<
´´7 8
Match
´´8 =
>
´´= >
(
´´> ?
)
´´? @
.
´´@ A
FirstOrDefault
´´A O
(
´´O P
mat
´´P S
=>
´´T V
mat
´´W Z
.
´´Z [
MatchID
´´[ b
==
´´c e
matchID
´´f m
)
´´m n
;
´´n o
if
¨¨ 
(
¨¨ 
matchToLeave
¨¨  
!=
¨¨! #
null
¨¨$ (
)
¨¨( )
{
≠≠ 
matchToLeave
ÆÆ  
.
ÆÆ  !
StatusMatchID
ÆÆ! .
=
ÆÆ/ 0
$num
ÆÆ1 2
;
ÆÆ2 3
dataContext
ØØ 
.
ØØ  
SubmitChanges
ØØ  -
(
ØØ- .
)
ØØ. /
;
ØØ/ 0
return
∞∞ 
true
∞∞ 
;
∞∞  
}
±± 
else
≤≤ 
{
≥≥ 
return
¥¥ 
false
¥¥  
;
¥¥  !
}
µµ 
}
∂∂ 
catch
∑∑ 
(
∑∑ 
SqlException
∑∑ 
ex
∑∑  "
)
∑∑" #
{
∏∏ 
throw
ππ 
ex
ππ 
;
ππ 
}
∫∫ 
}
ºº 	
public
ææ 
static
ææ 
bool
ææ 
UpdateCharBD
ææ '
(
ææ' (
char
ææ( ,
letter
ææ- 3
,
ææ3 4
int
ææ5 8
matchID
ææ9 @
)
ææ@ A
{
øø 	
try
¿¿ 
{
¡¡ 
var
¬¬ 

connection
¬¬ 
=
¬¬  
ConnectionDB
¬¬! -
.
¬¬- .
getConnection
¬¬. ;
(
¬¬; <
)
¬¬< =
;
¬¬= >

connection
√√ 
.
√√ 
Open
√√ 
(
√√  
)
√√  !
;
√√! "
DataContext
ƒƒ 
dataContext
ƒƒ '
=
ƒƒ( )
new
ƒƒ* -
DataContext
ƒƒ. 9
(
ƒƒ9 :

connection
ƒƒ: D
)
ƒƒD E
;
ƒƒE F
var
≈≈ 

charUpdate
≈≈ 
=
≈≈  
dataContext
≈≈! ,
.
≈≈, -
GetTable
≈≈- 5
<
≈≈5 6
Match
≈≈6 ;
>
≈≈; <
(
≈≈< =
)
≈≈= >
.
≈≈> ?
FirstOrDefault
≈≈? M
(
≈≈M N
mat
≈≈N Q
=>
≈≈R T
mat
≈≈U X
.
≈≈X Y
MatchID
≈≈Y `
==
≈≈a c
matchID
≈≈d k
)
≈≈k l
;
≈≈l m
if
∆∆ 
(
∆∆ 

charUpdate
∆∆ 
!=
∆∆ !
null
∆∆" &
)
∆∆& '
{
«« 

charUpdate
»» 
.
»» 
SelectedLetter
»» -
=
»». /
letter
»»0 6
;
»»6 7
dataContext
…… 
.
……  
SubmitChanges
……  -
(
……- .
)
……. /
;
……/ 0
return
   
true
   
;
    
}
ÀÀ 
else
ÃÃ 
{
ÕÕ 
return
ŒŒ 
false
ŒŒ  
;
ŒŒ  !
}
œœ 
}
–– 
catch
—— 
(
—— 
SqlException
—— 
ex
——  "
)
——" #
{
““ 
throw
”” 
ex
”” 
;
”” 
}
‘‘ 
}
’’ 	
public
◊◊ 
static
◊◊ 
bool
◊◊ 
UpdateWinner
◊◊ '
(
◊◊' (
int
◊◊( +
playerID
◊◊, 4
,
◊◊4 5
int
◊◊6 9
matchID
◊◊: A
)
◊◊A B
{
ÿÿ 	
try
ŸŸ 
{
⁄⁄ 
using
€€ 
(
€€ 
var
€€ 

connection
€€ %
=
€€& '
ConnectionDB
€€( 4
.
€€4 5
getConnection
€€5 B
(
€€B C
)
€€C D
)
€€D E
{
‹‹ 

connection
›› 
.
›› 
Open
›› #
(
››# $
)
››$ %
;
››% &
DataContext
ﬁﬁ 
dataContext
ﬁﬁ  +
=
ﬁﬁ, -
new
ﬁﬁ. 1
DataContext
ﬁﬁ2 =
(
ﬁﬁ= >

connection
ﬁﬁ> H
)
ﬁﬁH I
;
ﬁﬁI J
var
ﬂﬂ 
updateWinner
ﬂﬂ $
=
ﬂﬂ% &
dataContext
ﬂﬂ' 2
.
ﬂﬂ2 3
GetTable
ﬂﬂ3 ;
<
ﬂﬂ; <
Match
ﬂﬂ< A
>
ﬂﬂA B
(
ﬂﬂB C
)
ﬂﬂC D
.
ﬂﬂD E
FirstOrDefault
ﬂﬂE S
(
ﬂﬂS T
mat
ﬂﬂT W
=>
ﬂﬂX Z
mat
ﬂﬂ[ ^
.
ﬂﬂ^ _
MatchID
ﬂﬂ_ f
==
ﬂﬂg i
matchID
ﬂﬂj q
)
ﬂﬂq r
;
ﬂﬂr s
if
‡‡ 
(
‡‡ 
updateWinner
‡‡ $
!=
‡‡% '
null
‡‡( ,
)
‡‡, -
{
·· 
updateWinner
‚‚ $
.
‚‚$ %
WinnerID
‚‚% -
=
‚‚. /
playerID
‚‚0 8
;
‚‚8 9
dataContext
„„ #
.
„„# $
SubmitChanges
„„$ 1
(
„„1 2
)
„„2 3
;
„„3 4
return
‰‰ 
true
‰‰ #
;
‰‰# $
}
ÂÂ 
else
ÊÊ 
{
ÁÁ 
return
ËË 
false
ËË $
;
ËË$ %
}
ÈÈ 
}
ÍÍ 
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
SqlException
ÏÏ 
ex
ÏÏ  "
)
ÏÏ" #
{
ÌÌ 
throw
ÓÓ 
ex
ÓÓ 
;
ÓÓ 
}
ÔÔ 
}
 	
public
ÚÚ 
static
ÚÚ 
bool
ÚÚ %
UpdateRemainingAttempts
ÚÚ 2
(
ÚÚ2 3
int
ÚÚ3 6
remainingAttempts
ÚÚ7 H
,
ÚÚH I
int
ÚÚJ M
matchID
ÚÚN U
)
ÚÚU V
{
ÛÛ 	
try
ÙÙ 
{
ıı 
using
ˆˆ 
(
ˆˆ 
var
ˆˆ 

connection
ˆˆ %
=
ˆˆ& '
ConnectionDB
ˆˆ( 4
.
ˆˆ4 5
getConnection
ˆˆ5 B
(
ˆˆB C
)
ˆˆC D
)
ˆˆD E
{
˜˜ 

connection
¯¯ 
.
¯¯ 
Open
¯¯ #
(
¯¯# $
)
¯¯$ %
;
¯¯% &
DataContext
˘˘ 
dataContext
˘˘  +
=
˘˘, -
new
˘˘. 1
DataContext
˘˘2 =
(
˘˘= >

connection
˘˘> H
)
˘˘H I
;
˘˘I J
var
˙˙ 
updateAttempts
˙˙ &
=
˙˙' (
dataContext
˙˙) 4
.
˙˙4 5
GetTable
˙˙5 =
<
˙˙= >
Match
˙˙> C
>
˙˙C D
(
˙˙D E
)
˙˙E F
.
˙˙F G
FirstOrDefault
˙˙G U
(
˙˙U V
mat
˙˙V Y
=>
˙˙Z \
mat
˙˙] `
.
˙˙` a
MatchID
˙˙a h
==
˙˙i k
matchID
˙˙l s
)
˙˙s t
;
˙˙t u
if
˚˚ 
(
˚˚ 
updateAttempts
˚˚ &
!=
˚˚' )
null
˚˚* .
)
˚˚. /
{
¸¸ 
updateAttempts
˝˝ &
.
˝˝& '
RemainingAttempts
˝˝' 8
=
˝˝9 :
remainingAttempts
˝˝; L
;
˝˝L M
dataContext
˛˛ #
.
˛˛# $
SubmitChanges
˛˛$ 1
(
˛˛1 2
)
˛˛2 3
;
˛˛3 4
return
ˇˇ 
true
ˇˇ #
;
ˇˇ# $
}
ÄÄ 
else
ÅÅ 
{
ÇÇ 
return
ÉÉ 
false
ÉÉ $
;
ÉÉ$ %
}
ÑÑ 
}
ÖÖ 
}
ÜÜ 
catch
áá 
(
áá 
SqlException
áá 
ex
áá  "
)
áá" #
{
àà 
throw
ââ 
ex
ââ 
;
ââ 
}
ää 
}
ãã 	
public
çç 
static
çç 
int
çç 
GetMatchStatus
çç (
(
çç( )
int
çç) ,
matchID
çç- 4
)
çç4 5
{
éé 	
try
èè 
{
êê 
using
ëë 
(
ëë 
var
ëë 

connection
ëë %
=
ëë& '
ConnectionDB
ëë( 4
.
ëë4 5
getConnection
ëë5 B
(
ëëB C
)
ëëC D
)
ëëD E
{
íí 

connection
ìì 
.
ìì 
Open
ìì #
(
ìì# $
)
ìì$ %
;
ìì% &
DataContext
îî 
dataContext
îî  +
=
îî, -
new
îî. 1
DataContext
îî2 =
(
îî= >

connection
îî> H
)
îîH I
;
îîI J
var
ïï 
status
ïï 
=
ïï  
(
ïï! "
from
ïï" &
sta
ïï' *
in
ïï+ -
dataContext
ïï. 9
.
ïï9 :
GetTable
ïï: B
<
ïïB C
Match
ïïC H
>
ïïH I
(
ïïI J
)
ïïJ K
where
ññ" '
sta
ññ( +
.
ññ+ ,
MatchID
ññ, 3
==
ññ4 6
matchID
ññ7 >
select
óó" (
sta
óó) ,
.
óó, -
StatusMatchID
óó- :
)
óó: ;
.
óó; <
FirstOrDefault
óó< J
(
óóJ K
)
óóK L
;
óóL M
return
òò 
status
òò !
;
òò! "
}
ôô 
}
öö 
catch
õõ 
(
õõ 
SqlException
õõ 
ex
õõ  "
)
õõ" #
{
úú 
throw
ùù 
ex
ùù 
;
ùù 
}
ûû 
}
üü 	
public
°° 
static
°° 
char
°° 
?
°° 
GetGuestLetter
°° *
(
°°* +
int
°°+ .
matchID
°°/ 6
)
°°6 7
{
¢¢ 	
try
££ 
{
§§ 
using
•• 
(
•• 
var
•• 

connection
•• %
=
••& '
ConnectionDB
••( 4
.
••4 5
getConnection
••5 B
(
••B C
)
••C D
)
••D E
{
¶¶ 

connection
ßß 
.
ßß 
Open
ßß #
(
ßß# $
)
ßß$ %
;
ßß% &
DataContext
®® 
dataContext
®®  +
=
®®, -
new
®®. 1
DataContext
®®2 =
(
®®= >

connection
®®> H
)
®®H I
;
®®I J
var
©© 
letter
©© 
=
©©  
(
©©! "
from
©©" &
lett
©©' +
in
©©, .
dataContext
©©/ :
.
©©: ;
GetTable
©©; C
<
©©C D
Match
©©D I
>
©©I J
(
©©J K
)
©©K L
where
™™" '
lett
™™( ,
.
™™, -
MatchID
™™- 4
==
™™5 7
matchID
™™8 ?
&&
™™@ B
lett
™™C G
.
™™G H
GuestID
™™H O
!=
™™P R
null
™™S W
select
´´" (
lett
´´) -
.
´´- .
SelectedLetter
´´. <
)
´´< =
.
´´= >
FirstOrDefault
´´> L
(
´´L M
)
´´M N
;
´´N O
return
¨¨ 
letter
¨¨ !
;
¨¨! "
}
≠≠ 
}
ÆÆ 
catch
ØØ 
(
ØØ 
SqlException
ØØ 
ex
ØØ  "
)
ØØ" #
{
∞∞ 
throw
±± 
ex
±± 
;
±± 
}
≤≤ 
}
≥≥ 	
public
µµ 
static
µµ 
int
µµ "
GetRemainingAttempts
µµ .
(
µµ. /
int
µµ/ 2
matchID
µµ3 :
)
µµ: ;
{
∂∂ 	
try
∑∑ 
{
∏∏ 
using
ππ 
(
ππ 
var
ππ 

connection
ππ %
=
ππ& '
ConnectionDB
ππ( 4
.
ππ4 5
getConnection
ππ5 B
(
ππB C
)
ππC D
)
ππD E
{
∫∫ 

connection
ªª 
.
ªª 
Open
ªª #
(
ªª# $
)
ªª$ %
;
ªª% &
DataContext
ºº 
dataContext
ºº  +
=
ºº, -
new
ºº. 1
DataContext
ºº2 =
(
ºº= >

connection
ºº> H
)
ººH I
;
ººI J
var
ΩΩ 
attempts
ΩΩ  
=
ΩΩ! "
(
ΩΩ# $
from
ΩΩ$ (
at
ΩΩ) +
in
ΩΩ, .
dataContext
ΩΩ/ :
.
ΩΩ: ;
GetTable
ΩΩ; C
<
ΩΩC D
Match
ΩΩD I
>
ΩΩI J
(
ΩΩJ K
)
ΩΩK L
where
ææ$ )
at
ææ* ,
.
ææ, -
MatchID
ææ- 4
==
ææ5 7
matchID
ææ8 ?
select
øø$ *
at
øø+ -
.
øø- .
RemainingAttempts
øø. ?
)
øø? @
.
øø@ A
FirstOrDefault
øøA O
(
øøO P
)
øøP Q
;
øøQ R
return
¿¿ 
attempts
¿¿ #
;
¿¿# $
}
¡¡ 
}
¬¬ 
catch
√√ 
(
√√ 
SqlException
√√ 
ex
√√  "
)
√√" #
{
ƒƒ 
throw
≈≈ 
ex
≈≈ 
;
≈≈ 
}
∆∆ 
}
«« 	
public
…… 
static
…… 
void
……  
UpdatePointsEarned
…… -
(
……- .
int
……. 1
matchID
……2 9
,
……9 :
int
……; >
playerID
……? G
)
……G H
{
   	
try
ÀÀ 
{
ÃÃ 
using
ÕÕ 
(
ÕÕ 
var
ÕÕ 

connection
ÕÕ %
=
ÕÕ& '
ConnectionDB
ÕÕ( 4
.
ÕÕ4 5
getConnection
ÕÕ5 B
(
ÕÕB C
)
ÕÕC D
)
ÕÕD E
{
ŒŒ 

connection
œœ 
.
œœ 
Open
œœ #
(
œœ# $
)
œœ$ %
;
œœ% &
DataContext
–– 
dataContext
––  +
=
––, -
new
––. 1
DataContext
––2 =
(
––= >

connection
––> H
)
––H I
;
––I J
var
““ 
match
““ 
=
““ 
(
““  !
from
““! %
m
““& '
in
““( *
dataContext
““+ 6
.
““6 7
GetTable
““7 ?
<
““? @
Match
““@ E
>
““E F
(
““F G
)
““G H
where
””! &
m
””' (
.
””( )
MatchID
””) 0
==
””1 3
matchID
””4 ;
select
‘‘! '
m
‘‘( )
)
‘‘) *
.
‘‘* +
FirstOrDefault
‘‘+ 9
(
‘‘9 :
)
‘‘: ;
;
‘‘; <
if
÷÷ 
(
÷÷ 
match
÷÷ 
==
÷÷  
null
÷÷! %
||
÷÷& (
match
÷÷) .
.
÷÷. /
WinnerID
÷÷/ 7
==
÷÷8 :
null
÷÷; ?
)
÷÷? @
return
◊◊ 
;
◊◊ 
var
ŸŸ 
player
ŸŸ 
=
ŸŸ  
(
ŸŸ! "
from
ŸŸ" &
p
ŸŸ' (
in
ŸŸ) +
dataContext
ŸŸ, 7
.
ŸŸ7 8
GetTable
ŸŸ8 @
<
ŸŸ@ A
Player
ŸŸA G
>
ŸŸG H
(
ŸŸH I
)
ŸŸI J
where
⁄⁄" '
p
⁄⁄( )
.
⁄⁄) *
PlayerID
⁄⁄* 2
==
⁄⁄3 5
playerID
⁄⁄6 >
select
€€" (
p
€€) *
)
€€* +
.
€€+ ,
FirstOrDefault
€€, :
(
€€: ;
)
€€; <
;
€€< =
if
›› 
(
›› 
player
›› 
==
›› !
null
››" &
)
››& '
return
ﬁﬁ 
;
ﬁﬁ 
if
‡‡ 
(
‡‡ 
match
‡‡ 
.
‡‡ 
WinnerID
‡‡ &
==
‡‡' )
match
‡‡* /
.
‡‡/ 0
ChallengerID
‡‡0 <
&&
‡‡= ?
playerID
‡‡@ H
==
‡‡I K
match
‡‡L Q
.
‡‡Q R
ChallengerID
‡‡R ^
)
‡‡^ _
{
·· 
player
‚‚ 
.
‚‚ 
PointsEarned
‚‚ +
+=
‚‚, .
$num
‚‚/ 0
;
‚‚0 1
}
„„ 
else
‰‰ 
if
‰‰ 
(
‰‰ 
match
‰‰ "
.
‰‰" #
WinnerID
‰‰# +
==
‰‰, .
match
‰‰/ 4
.
‰‰4 5
GuestID
‰‰5 <
&&
‰‰= ?
playerID
‰‰@ H
==
‰‰I K
match
‰‰L Q
.
‰‰Q R
GuestID
‰‰R Y
)
‰‰Y Z
{
ÂÂ 
player
ÊÊ 
.
ÊÊ 
PointsEarned
ÊÊ +
+=
ÊÊ, .
$num
ÊÊ/ 1
;
ÊÊ1 2
}
ÁÁ 
dataContext
ÈÈ 
.
ÈÈ  
SubmitChanges
ÈÈ  -
(
ÈÈ- .
)
ÈÈ. /
;
ÈÈ/ 0
}
ÍÍ 
}
ÎÎ 
catch
ÏÏ 
(
ÏÏ 
SqlException
ÏÏ 
ex
ÏÏ  "
)
ÏÏ" #
{
ÌÌ 
throw
ÓÓ 
ex
ÓÓ 
;
ÓÓ 
}
ÔÔ 
}
 	
public
ÚÚ 
static
ÚÚ 
void
ÚÚ 
PenalizeAbandon
ÚÚ *
(
ÚÚ* +
int
ÚÚ+ .
playerID
ÚÚ/ 7
)
ÚÚ7 8
{
ÛÛ 	
try
ÙÙ 
{
ıı 
using
ˆˆ 
(
ˆˆ 
var
ˆˆ 

connection
ˆˆ %
=
ˆˆ& '
ConnectionDB
ˆˆ( 4
.
ˆˆ4 5
getConnection
ˆˆ5 B
(
ˆˆB C
)
ˆˆC D
)
ˆˆD E
{
˜˜ 

connection
¯¯ 
.
¯¯ 
Open
¯¯ #
(
¯¯# $
)
¯¯$ %
;
¯¯% &
DataContext
˘˘ 
dataContext
˘˘  +
=
˘˘, -
new
˘˘. 1
DataContext
˘˘2 =
(
˘˘= >

connection
˘˘> H
)
˘˘H I
;
˘˘I J
var
˚˚ 
player
˚˚ 
=
˚˚  
(
˚˚! "
from
˚˚" &
p
˚˚' (
in
˚˚) +
dataContext
˚˚, 7
.
˚˚7 8
GetTable
˚˚8 @
<
˚˚@ A
Player
˚˚A G
>
˚˚G H
(
˚˚H I
)
˚˚I J
where
¸¸" '
p
¸¸( )
.
¸¸) *
PlayerID
¸¸* 2
==
¸¸3 5
playerID
¸¸6 >
select
˝˝" (
p
˝˝) *
)
˝˝* +
.
˝˝+ ,
FirstOrDefault
˝˝, :
(
˝˝: ;
)
˝˝; <
;
˝˝< =
if
ˇˇ 
(
ˇˇ 
player
ˇˇ 
==
ˇˇ !
null
ˇˇ" &
)
ˇˇ& '
return
ÄÄ 
;
ÄÄ 
player
ÇÇ 
.
ÇÇ 
PointsEarned
ÇÇ '
-=
ÇÇ( *
$num
ÇÇ+ ,
;
ÇÇ, -
dataContext
ÉÉ 
.
ÉÉ  
SubmitChanges
ÉÉ  -
(
ÉÉ- .
)
ÉÉ. /
;
ÉÉ/ 0
}
ÑÑ 
}
ÖÖ 
catch
ÜÜ 
(
ÜÜ 
SqlException
ÜÜ 
ex
ÜÜ  "
)
ÜÜ" #
{
áá 
throw
àà 
ex
àà 
;
àà 
}
ââ 
}
ää 	
public
çç 
static
çç 
int
çç 
?
çç 
GetWinnerID
çç &
(
çç& '
int
çç' *
matchID
çç+ 2
)
çç2 3
{
éé 	
try
èè 
{
êê 
using
ëë 
(
ëë 
var
ëë 

connection
ëë %
=
ëë& '
ConnectionDB
ëë( 4
.
ëë4 5
getConnection
ëë5 B
(
ëëB C
)
ëëC D
)
ëëD E
{
íí 

connection
ìì 
.
ìì 
Open
ìì #
(
ìì# $
)
ìì$ %
;
ìì% &
DataContext
îî 
dataContext
îî  +
=
îî, -
new
îî. 1
DataContext
îî2 =
(
îî= >

connection
îî> H
)
îîH I
;
îîI J
var
ïï 
winnerId
ïï  
=
ïï! "
(
ïï# $
from
ïï$ (
mat
ïï) ,
in
ïï- /
dataContext
ïï0 ;
.
ïï; <
GetTable
ïï< D
<
ïïD E
Match
ïïE J
>
ïïJ K
(
ïïK L
)
ïïL M
where
ññ$ )
mat
ññ* -
.
ññ- .
MatchID
ññ. 5
==
ññ6 8
matchID
ññ9 @
select
óó$ *
mat
óó+ .
.
óó. /
WinnerID
óó/ 7
)
óó7 8
.
óó8 9
FirstOrDefault
óó9 G
(
óóG H
)
óóH I
;
óóI J
return
òò 
winnerId
òò #
;
òò# $
}
ôô 
}
öö 
catch
õõ 
(
õõ 
SqlException
õõ 
ex
õõ  "
)
õõ" #
{
úú 
throw
ùù 
ex
ùù 
;
ùù 
}
ûû 
}
üü 	
}
°° 
}¢¢ ö
QC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\DTO\CategoryDTO.cs
	namespace 	
Logic
 
. 
DTO 
{ 
public		 

class		 
CategoryDTO		 
{

 
public 
static 
List 
< 
Category #
># $
GetCategories% 2
(2 3
)3 4
{ 	
try 
{ 
var 

connection 
=  
ConnectionDB! -
.- .
getConnection. ;
(; <
)< =
;= >

connection 
. 
Open 
(  
)  !
;! "
DataContext 
dataContext '
=( )
new* -
DataContext. 9
(9 :

connection: D
)D E
;E F
var 

categories 
=  
(! "
from" &
cat' *
in+ -
dataContext. 9
.9 :
GetTable: B
<B C
CategoryC K
>K L
(L M
)M N
select" (
cat) ,
), -
.- .
ToList. 4
(4 5
)5 6
;6 7
return 

categories !
;! "
} 
catch 
( 
SqlException 
)  
{ 
throw 
; 
} 
} 	
} 
} ˙
NC:\Users\ReneU\Documents\Github\HangedMan_Project_Online\Logic\ConnectionDB.cs
	namespace 	
Logic
 
{ 
internal 
class 
ConnectionDB 
{ 
public 
static 
SqlConnection #
getConnection$ 1
(1 2
)2 3
{		 	
string

 
connectionString

 #
=

$ %
$str

& }
;

} ~
return 
new 
SqlConnection $
($ %
connectionString% 5
)5 6
;6 7
} 	
} 
} 